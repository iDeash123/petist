{% with button_variant=variant|default:"list" %}
{% if button_variant == 'primary' %}
<button
    id="adopt-btn-{{ animal.id }}-primary"
    class="flex-1 {% if has_request and request_status == 'pending' %}bg-yellow-500 hover:bg-yellow-600{% elif has_request and request_status == 'approved' %}bg-green-600 cursor-default{% elif has_request and request_status == 'rejected' %}bg-red-500 cursor-default{% else %}bg-green-600 hover:bg-green-700{% endif %} text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 flex items-center justify-center gap-2"
    {% if not has_request or request_status == 'pending' %}
    hx-post="{% url 'animals:toggle_adoption' animal.slug %}" 
    hx-swap="outerHTML"
    hx-vals='{"variant": "primary"}'
    {% else %}
    disabled
    {% endif %}>
    
    {% if has_request %}
        {% if request_status == 'pending' %}
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Request Pending
        {% elif request_status == 'approved' %}
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 3.5a1.5 1.5 0 013 0V4a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-.5a1.5 1.5 0 000 3h.5a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-.5a1.5 1.5 0 00-3 0v.5a1 1 0 01-1 1H6a1 1 0 01-1-1v-3a1 1 0 00-1-1h-.5a1.5 1.5 0 010-3H4a1 1 0 001-1V6a1 1 0 011-1h3a1 1 0 001-1v-.5z" />
        </svg>
        Adopted!
        {% elif request_status == 'rejected' %}
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
        Request Rejected
        {% endif %}
    {% else %}
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5" />
    </svg>
    Request Adoption
    {% endif %}
</button>

{% elif button_variant == 'detail' %}
<button
    id="adopt-btn-{{ animal.id }}-detail"
    class="flex items-center space-x-2 {% if has_request and request_status == 'pending' %}text-yellow-600 hover:text-yellow-700{% elif has_request and request_status == 'approved' %}text-green-600 cursor-default{% elif has_request and request_status == 'rejected' %}text-red-600 cursor-default{% else %}hover:text-brand-600 dark:hover:text-brand-400{% endif %} transition-colors"
    {% if not has_request or request_status == 'pending' %}
    hx-post="{% url 'animals:toggle_adoption' animal.slug %}" 
    hx-swap="outerHTML"
    hx-vals='{"variant": "detail"}'
    {% else %}
    disabled
    {% endif %}
    aria-label="Toggle Adoption">
    
    {% if has_request %}
        {% if request_status == 'pending' %}
        <svg class="w-5 h-5 text-yellow-500 fill-current" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
        </svg>
        <span class="font-medium">Pending</span>
        {% elif request_status == 'approved' %}
        <svg class="w-5 h-5 text-green-500 fill-current" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 3.5a1.5 1.5 0 013 0V4a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-.5a1.5 1.5 0 000 3h.5a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-.5a1.5 1.5 0 00-3 0v.5a1 1 0 01-1 1H6a1 1 0 01-1-1v-3a1 1 0 00-1-1h-.5a1.5 1.5 0 010-3H4a1 1 0 001-1V6a1 1 0 011-1h3a1 1 0 001-1v-.5z" />
        </svg>
        <span class="font-medium">Adopted</span>
        {% elif request_status == 'rejected' %}
        <svg class="w-5 h-5 text-red-500 fill-current" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
        </svg>
        <span class="font-medium">Rejected</span>
        {% endif %}
    {% else %}
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5" />
    </svg>
    <span>Request Adoption</span>
    {% endif %}
</button>

{% else %}
<button 
    id="adopt-btn-{{ animal.id }}-{% if from_my_pets %}mypets{% else %}list{% endif %}"
    class="absolute top-3 left-3 p-2 rounded-full backdrop-blur-sm hover:bg-white transition-all duration-300 group z-10 {% if has_request and request_status == 'pending' %}bg-yellow-100/80{% elif has_request and request_status == 'approved' %}bg-green-100/80{% elif has_request and request_status == 'rejected' %}bg-red-100/80{% else %}bg-white/80{% endif %}"
    {% if not has_request or request_status == 'pending' %}
    hx-post="{% url 'animals:toggle_adoption' animal.slug %}{% if from_profile %}?from_profile=1{% endif %}{% if from_my_pets %}{% if from_profile %}&{% endif %}from_my_pets=1{% endif %}" 
    hx-swap="outerHTML"
    hx-vals='{"variant": "list"}'
    {% else %}
    disabled
    {% endif %}
    aria-label="Toggle Adoption"
    title="{% if has_request %}{{ request_status|title }}{% else %}Request Adoption{% endif %}"
>
    {% if has_request %}
        {% if request_status == 'pending' %}
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-500 fill-current transform scale-110 transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
        </svg>
        {% elif request_status == 'approved' %}
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500 fill-current transform scale-110 transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 3.5a1.5 1.5 0 013 0V4a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-.5a1.5 1.5 0 000 3h.5a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-.5a1.5 1.5 0 00-3 0v.5a1 1 0 01-1 1H6a1 1 0 01-1-1v-3a1 1 0 00-1-1h-.5a1.5 1.5 0 010-3H4a1 1 0 001-1V6a1 1 0 011-1h3a1 1 0 001-1v-.5z" />
        </svg>
        {% elif request_status == 'rejected' %}
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-500 fill-current transform scale-110 transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
        </svg>
        {% endif %}
    {% else %}
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 group-hover:text-green-500 transition-colors duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5" />
    </svg>
    {% endif %}
</button>
{% endif %}
{% endwith %}
